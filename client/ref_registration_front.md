# ‚úÖ Frontend Refactor Checklist (CowboyLogic)

–¶–µ–π —á–µ–∫–ª–∏—Å—Ç –æ—Ö–æ–ø–ª—é—î –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ—ó —á–∞—Å—Ç–∏–Ω–∏ –ø—Ä–æ—î–∫—Ç—É, –∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å, —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å, UX, –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ä–æ–ª–µ–π —ñ –º–∞–π–±—É—Ç–Ω—ñ–π –ø—Ä–æ–¥–∞–∫—à–Ω.

## üìÅ Phase 1: Auth UI & Logic

- [x] –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `yup` –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ `loginFormSchema(t)` —Ç–∞ `codeVerificationSchema(t)`
- [x] –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ —Å–µ—Ä–≤–µ—Ä–∞ (—á–µ—Ä–µ–∑ `err.response?.data?.message` ‚Üí `showNotification`)
- [x] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–¥—É –∑ –±–µ–∫–µ–Ω–¥—É: `code` –≤–µ—Ä–∏—Ñ—ñ–∫—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `/auth/verify-code`
- [x] `isEmailVerified` –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ (—É loginUser), –æ—Ç–∂–µ backend –±–ª–æ–∫—É—î –Ω–µ–≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö
- [x] –ö–Ω–æ–ø–∫–∞ `disabled` –ø—ñ–¥ —á–∞—Å —Å–∞–±–º—ñ—Ç—É `isLoading` (`Verify` –∫—Ä–æ–∫)
- [x] –õ–æ–≥—ñ–∫–∞ Google Login –æ–±–≥–æ—Ä–Ω—É—Ç–∞ –≤ –æ–∫—Ä–µ–º–∏–π `handleGoogleLogin` –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫
- [x] –î–æ–¥–∞—Ç–∏ `disabled={isLoading}` —Ç–∞–∫–æ–∂ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–µ—Ä—à–æ–º—É –∫—Ä–æ—Ü—ñ (–ª–æ–≥—ñ–Ω)
- [x] –î–æ–¥–∞—Ç–∏ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `<Loader />` –∞–±–æ —Å–ø—ñ–Ω–µ—Ä) –¥–ª—è –æ–±–æ—Ö –∫—Ä–æ–∫—ñ–≤
- [x] –î–æ–¥–∞—Ç–∏ –æ–∫—Ä–µ–º—É –æ–±—Ä–æ–±–∫—É 403 (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ email –Ω–µ –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ, –ø–æ–∫–∞–∑–∞—Ç–∏ –ø—ñ–¥–∫–∞–∑–∫—É —ñ –∫–Ω–æ–ø–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –∫–æ–¥—É)
- [x] –î–æ–¥–∞—Ç–∏ –º–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –∫–æ–¥—É –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (resend)
- [x] –ú–æ–∂–ª–∏–≤–æ: –¥–æ–¥–∞—Ç–∏ —Ç–∞–π–º–µ—Ä (30‚Äì60 —Å–µ–∫) –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ—é –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –∫–æ–¥—É
- [x] –ü—ñ—Å–ª—è Google-–ª–æ–≥—ñ–Ω—É —Ç–∞–∫–æ–∂ –∑—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `isEmailVerified` (–Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ —Ö—Ç–æ—Å—å –¥–æ–¥–∞—Å—Ç—å Google email –≤—Ä—É—á–Ω—É)

## üîê –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è + –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è Email ‚Äî –ß–µ–∫–ª–∏—Å—Ç (—Å—Ç–∞–Ω –Ω–∞ 2025-07-08)

### ‚úÖ RegisterForm.jsx

- [x] –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ `yup` + `react-hook-form`
- [x] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–ª—è:
  - `termsAgreed` (checkbox)
  - `repeatPassword` (match —ñ–∑ –ø–∞—Ä–æ–ª–µ–º)
  - `partnerProfile` (—É–º–æ–≤–Ω–∏–π yup.shape)
- [x] –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ `partnerProfile` –ø–æ–ª—ñ–≤ (—á–µ—Ä–µ–∑ `watch("isPartner")`)
- [x] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/verify-email` **–ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∫–æ–¥—É**
  - `email` –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ Redux (`emailForVerification`)

---

### ‚úÖ VerifyEmailPage.jsx

- [x] –í–≤–µ–¥–µ–Ω–Ω—è 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥—É (`yup` –≤–∞–ª—ñ–¥–∞—Ü—ñ—è: `matches(/^\d{6}$/)`)
- [x] –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∫–æ–¥—É —á–µ—Ä–µ–∑ `/auth/verify-code`
- [x] –û—Ç—Ä–∏–º–∞–Ω–Ω—è JWT ‚Üí `localStorage.setItem(token)` + Redux ‚Üí `fetchCurrentUser(token)`
- [x] –ö–Ω–æ–ø–∫–∞ **"Resend code"**:
  - [x] –ó–∞–ø–∏—Ç –Ω–∞ `/auth/request-code`
  - [x] –¢–∞–π–º–µ—Ä cooldown: 60 —Å–µ–∫—É–Ω–¥
- [x] `email` –±–µ—Ä–µ—Ç—å—Å—è –∑ Redux, –∞ –Ω–µ `location.state`
  - [ ] –ú–æ–∂–Ω–∞ –æ—á–∏—Å—Ç–∏—Ç–∏ email –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)

---

### ‚úÖ useAuth() + AuthProvider

- [x] –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω (`useState + localStorage`)
- [x] –ü—ñ–¥–≤–∞–Ω—Ç–∞–∂—É—î –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`/auth/me`) —á–µ—Ä–µ–∑ `fetchUser()`
- [x] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `login()` / `logout()` / `loading` / `isAdmin`, `isPartner`
- [x] –î–æ–¥–∞–Ω–æ –ø–∞—Ä—Å–∏–Ω–≥ JWT (`jwt-decode`):
  - [x] `decodedToken` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É —Å—Ç–µ–π—Ç—ñ
  - [x] `decodedToken` –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `AuthContext`
  - [ ] üîú *–©–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (–º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `exp`, `role`, `sub`, claims —Ç–æ—â–æ)*

---

### ‚úÖ API-—É—Ç–∏–ª—ñ—Ç–∏

- [x] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `createApiClient(token?)`:
  - –¥–æ–¥–∞—î `Authorization: Bearer ...` —è–∫—â–æ —Ç–æ–∫–µ–Ω –Ω–∞–¥–∞–Ω–æ
- [x] –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–æ—á–∫–æ–≤–æ –≤:
  - `RegisterForm`
  - `VerifyEmailPage`
- [ ] ‚ùå –ù–µ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ ‚Äî **—ñ —Ü–µ —Å–≤—ñ–¥–æ–º–æ** (–≥–Ω—É—á–∫—ñ—à–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É)

---

## üîê Phase 2: Role-Based Access & Routing

- [x] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ `PrivateRoute` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
  - [x] –ü–µ—Ä–µ–≤—ñ—Ä—è—î `isAuthenticated`
  - [x] –í—Ä–∞—Ö–æ–≤—É—î `user.role` –¥–ª—è `admin` / `partner` / `superAdmin`
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `RequireRole` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
  - [x] `<RequireRole role="admin">...</RequireRole>`
  - [x] –ü–æ–∫–∞–∑—É—î 403 —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–±–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç
- [x] –í–∏–≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Add Book) –ª–∏—à–µ –¥–ª—è `admin`
- [x] Restrict routes: /admin
- [x] Protect UI elements:
  - [x] AddBookButton ‚Üí admin only
  - [x] Edit/Delete ‚Üí admin only
- [x] Conditional navbar links based on role
- [—Ö] Ensure BookList, Cart, BookDetails respect partnerPrice

---

## ‚úÖ Phase 3A: Signup-only Refactor Checklist

### üîê Redux / Auth –ª–æ–≥—ñ–∫–∞

- [x] –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ñ —Å–∞–Ω–∫–∏: `loginUser`, `fetchCurrentUser`, `logoutUser`
- [x] –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è `token` —É Redux —Ç–∞ `localStorage`
- [x] –û–Ω–æ–≤–∏—Ç–∏ `AuthProvider` –Ω–∞ –±–∞–∑—ñ Redux (–±–µ–∑ `jwt-decode` –ø–æ–º–∏–ª–æ–∫)

---

### üí† UI/UX —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π–Ω–æ—ó —Ñ–æ—Ä–º–∏

- [x] –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤—Å—ñ –ø–æ–ª—è –Ω–∞ `BaseInput`, `BaseForm`, `BaseButton`
- [x] –î–æ–¥–∞—Ç–∏ Yup-—Å—Ö–µ–º—É (`registerFormSchema`) –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- [x] UX: –ø–æ–∫–∞–∑ –ø–æ–º–∏–ª–æ–∫ –ø—ñ–¥ –ø–æ–ª—è–º–∏ (—á–µ—Ä–µ–∑ `FormGroup`)
- [x] UX: –ø–æ–∫–∞–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–µ—Ä–µ–∑ `showNotification`

---

### üßæ –ù–æ–≤—ñ –ø–æ–ª—è (partner signup)

- [x] `organizationName` (—è–∫ `partnerProfile.organizationName`)
- [x] `businessType`
- [x] `address`, `city`, `country` (—ñ–Ω—à–µ ‚Äî –æ–ø—Ü—ñ–π–Ω–æ)
- [x] –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è `role: "partner"` –Ω–∞ –±–µ–∫–µ–Ω–¥
- [x] `billingAddress`, `contactPhone`, `businessWebsite` (‚ùóÔ∏è–Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ)

---

### üéØ UX-–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

- [ ] Multi-step —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (wizard)
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —á–µ—Ä–Ω–µ—Ç–∫–∏ (Redux –∞–±–æ localStorage)
- [ ] –î–æ–¥–∞—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É `Thank you for registering`
- [ ] Inline –ø–æ—è—Å–Ω–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ (tooltip –∞–±–æ –æ–ø–∏—Å)

---

### üìÇ –î–æ—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏

- [x] `authSlice.js` ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–æ
- [x] `authThunks.js` ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞ –ª–æ–≥—ñ–∫–∞
- [x] `RegisterForm.jsx` ‚Äî —Ñ–æ—Ä–º–∞ + –ª–æ–≥—ñ–∫–∞
- [x] `registerFormSchema.js` ‚Äî yup-–≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- [x] `notificationSlice.js` ‚Äî UX –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- [ ] `routes.jsx` ‚Äî –º–∞—Ä—à—Ä—É—Ç –Ω–∞ `ThankYouPage` (–æ–ø—Ü.)
